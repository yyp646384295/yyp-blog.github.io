import{_ as s,c as n,o as a,O as l}from"./chunks/framework.bb2eaf3b.js";const p="/yyp-blog.github.io/assets/img.2e20d31a.png",o="/yyp-blog.github.io/assets/img_1.e940b595.png",d=JSON.parse('{"title":"GitHub Actions使用方法","description":"","frontmatter":{},"headers":[],"relativePath":"documents/github_actions/index.md","filePath":"documents/github_actions/index.md","lastUpdated":1687156245000}'),e={name:"documents/github_actions/index.md"},t=l('<h1 id="github-actions使用方法" tabindex="-1">GitHub Actions使用方法 <a class="header-anchor" href="#github-actions使用方法" aria-label="Permalink to &quot;GitHub Actions使用方法&quot;">​</a></h1><p>这篇文章记录使用github actions、github pages实现部署项目功能</p><h2 id="开始" tabindex="-1">开始 <a class="header-anchor" href="#开始" aria-label="Permalink to &quot;开始&quot;">​</a></h2><ol><li>登录到你的github首页，选择创建新仓库(New repository)</li><li>仓库命名格式为：<code>projectName.github.io</code></li><li>创建仓库成功后，将项目源代码提交到改仓库</li></ol><blockquote><p>注意:项目需要进行开源才可以使用<code>GitHub Pages</code>功能</p></blockquote><h2 id="检查" tabindex="-1">检查 <a class="header-anchor" href="#检查" aria-label="Permalink to &quot;检查&quot;">​</a></h2><ol><li>将代码提交到仓库后，我们需要到仓库的Settings/Pages查看github是否有给我们开了页面 <img src="'+p+`" alt="img.png"></li><li>这是可以点击<code>Visit site</code>确定是否可访问该项目</li></ol><h2 id="权限" tabindex="-1">权限 <a class="header-anchor" href="#权限" aria-label="Permalink to &quot;权限&quot;">​</a></h2><ol><li>进入到仓库Settings中</li><li>侧边栏选择Actions/General</li><li>找到workflow permissions</li><li>选择&#39;Read and write permissions&#39;</li><li>保存</li></ol><h2 id="配置运行" tabindex="-1">配置运行 <a class="header-anchor" href="#配置运行" aria-label="Permalink to &quot;配置运行&quot;">​</a></h2><ol><li>点击仓库中的<code>Actions</code>选择创建模版<code>Simple workflow</code>，脚本文件命名为main.yml</li><li>这时候会在项目根目录中创建一个<code>.github/workflows</code>目录</li><li>进入<code>.github/workflows</code>目录，开始编写脚本执行文件。</li><li>更改提交后，点击actions查看脚本执行结果。</li><li>成功后可访问Settings/Pages中的域名地址。</li></ol><blockquote><p>访问地址：<a href="https://xn--github-8h6jw94gi04f.github.io/%E4%BB%93%E5%BA%93%E5%90%8D/" target="_blank" rel="noreferrer">https://github账户名.github.io/仓库名/</a></p></blockquote><h3 id="main-yml" tabindex="-1">main.yml <a class="header-anchor" href="#main-yml" aria-label="Permalink to &quot;main.yml&quot;">​</a></h3><div class="language-yml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki vitesse-dark vp-code-dark"><code><span class="line"><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">vue-template</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 脚本名称</span></span>
<span class="line"><span style="color:#4D9375;">on</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">push</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">branches</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">main</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 当提交到main分支后开始执行</span></span>
<span class="line"><span style="color:#B8A965;">jobs</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">  </span><span style="color:#B8A965;">build-and-deploy</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">runs-on</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">ubuntu-latest</span></span>
<span class="line"><span style="color:#DBD7CAEE;">    </span><span style="color:#B8A965;">steps</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">uses</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">actions/checkout@v3</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 下载所需依赖</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">uses</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">actions/setup-node@v1</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">with</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">node-version</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D99;">&#39;</span><span style="color:#C98A7D;">14.x</span><span style="color:#C98A7D99;">&#39;</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 指定node版本</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">ENV</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">run</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">|</span></span>
<span class="line"><span style="color:#C98A7D;">          node -v</span></span>
<span class="line"><span style="color:#C98A7D;">          npm -v</span></span>
<span class="line"><span style="color:#C98A7D;">          npm config set registry https://registry.npm.taobao.org</span></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">Install and Build</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;"># 安装依赖、打包，如果提前已打包好无需这一步</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">run</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#4D9375;">|</span><span style="color:#FDAEB7;font-style:italic;">   </span></span>
<span class="line"><span style="color:#C98A7D;">          npm install</span></span>
<span class="line"><span style="color:#C98A7D;">          npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CAEE;">      </span><span style="color:#666666;">-</span><span style="color:#DBD7CAEE;"> </span><span style="color:#B8A965;">name</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">Deploy</span><span style="color:#DBD7CAEE;">   </span><span style="color:#758575DD;"># 部署</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">uses</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">JamesIves/github-pages-deploy-action@v4.3.3</span></span>
<span class="line"><span style="color:#DBD7CAEE;">        </span><span style="color:#B8A965;">with</span><span style="color:#666666;">:</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">branch</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">gh-pages</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 部署后提交到那个分支</span></span>
<span class="line"><span style="color:#DBD7CAEE;">          </span><span style="color:#B8A965;">folder</span><span style="color:#666666;">:</span><span style="color:#DBD7CAEE;"> </span><span style="color:#C98A7D;">dist</span><span style="color:#DBD7CAEE;"> </span><span style="color:#758575DD;"># 这里填打包好的目录名称</span></span></code></pre><pre class="shiki vitesse-light vp-code-light"><code><span class="line"><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">vue-template</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 脚本名称</span></span>
<span class="line"><span style="color:#1E754F;">on</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">push</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">branches</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">-</span><span style="color:#393A34;"> </span><span style="color:#B56959;">main</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 当提交到main分支后开始执行</span></span>
<span class="line"><span style="color:#998418;">jobs</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#998418;">build-and-deploy</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">runs-on</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">ubuntu-latest</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#998418;">steps</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">-</span><span style="color:#393A34;"> </span><span style="color:#998418;">uses</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">actions/checkout@v3</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 下载所需依赖</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">-</span><span style="color:#393A34;"> </span><span style="color:#998418;">uses</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">actions/setup-node@v1</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">with</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">node-version</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B5695999;">&#39;</span><span style="color:#B56959;">14.x</span><span style="color:#B5695999;">&#39;</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 指定node版本</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">-</span><span style="color:#393A34;"> </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">ENV</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">run</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">|</span></span>
<span class="line"><span style="color:#B56959;">          node -v</span></span>
<span class="line"><span style="color:#B56959;">          npm -v</span></span>
<span class="line"><span style="color:#B56959;">          npm config set registry https://registry.npm.taobao.org</span></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">-</span><span style="color:#393A34;"> </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Install and Build</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;"># 安装依赖、打包，如果提前已打包好无需这一步</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">run</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#1E754F;">|</span><span style="color:#B31D28;font-style:italic;">   </span></span>
<span class="line"><span style="color:#B56959;">          npm install</span></span>
<span class="line"><span style="color:#B56959;">          npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">      </span><span style="color:#999999;">-</span><span style="color:#393A34;"> </span><span style="color:#998418;">name</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">Deploy</span><span style="color:#393A34;">   </span><span style="color:#A0ADA0;"># 部署</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">uses</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">JamesIves/github-pages-deploy-action@v4.3.3</span></span>
<span class="line"><span style="color:#393A34;">        </span><span style="color:#998418;">with</span><span style="color:#999999;">:</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">branch</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">gh-pages</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 部署后提交到那个分支</span></span>
<span class="line"><span style="color:#393A34;">          </span><span style="color:#998418;">folder</span><span style="color:#999999;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">dist</span><span style="color:#393A34;"> </span><span style="color:#A0ADA0;"># 这里填打包好的目录名称</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><img src="`+o+'" alt="img_1.png"></p>',15),c=[t];function r(i,y,A,D,b,u){return a(),n("div",null,c)}const m=s(e,[["render",r]]);export{d as __pageData,m as default};
